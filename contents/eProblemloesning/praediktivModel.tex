\chapter{Problemløsning}
På ortopædkirurgisk afdeling på Aalborg Universitetshospital ønskes der, på baggrund af afsnit \ref{kap}, en $100~\%$ kapacitetsudnyttelse med henblik på at udnytte de tilgængelige ressourcer optimalt. Kapacitetsudnyttelse er forholdet mellem aktivitet og kapacitet, hvoraf antal patienter er en betydende faktor ift. aktivitet. 
Det fremgår af afsnit \ref{omfang}, at belægningsgraden på ortopædkirurgisk afdelingen er varierende for hver måned. Ved en belægning over $100~\%$ vil afdelingen opleve kapacitetsmangel, hvilket vil medføre, at personalet skal yde mere end afdelingen har kapacitet til. Derimod vil afdelingen ved en belægning under $100~\%$ forårsage, at der ikke er fuld udnyttelse af personalets arbejdskraft. Derved oplever ortopædkirurgisk af deling en ubalance i kapacitetsudnyttelsen. 
For at opnå en kapacitetsudnyttelse på $100~\%$, skal en ligevægt mellem aktivitet og kapacitet forekomme. Denne ligevægt kan tilnærmes ved at justere på en af faktorerene under aktivitet og kapacitet\cite{Bames2015}. Det kan herunder forsøges at effektivere planlægningen af patienter og dertil forsøge at estimere indlæggelsesvarigheden for de indlagte patienter. 
På baggrund af dette opstilles følgende hypotese:\\

\noindent
%\begin{itemize}
%\item 
Indlæggelsesvarigheden for patienter kan benyttes til at effektivisere kapacitetsudnyttelsen. 
%\end{itemize}

\subsection{Datasæt}
For dette projekt tages der udgangspunkt i et datasæt på ortopædkirurgisk afdeling på Aalborg Universitets hospital. Datasættet er indsamlet gennem digitale patientjournaler i for perioden: 1. August 2014 til 31. Oktober 2014. Datasættet er indsamlet på baggrund af en analyse af indlæggelsestid vha. biomarkører. Datasættet indeholder 970 registrerede patienter med informationen fordelt på 78 forskellige parametre. Da indsamlingen af data er sket på eksisterende data, og ikke på patientjournaler der er udarbejdet med henblik på indsamlingen af data, er der parametre for nogle patienter der ikke er udfyldte. Dermed er præprocessering af datasættet nødvendigt. Dette afsnit har til formål at analysere hvordan datasættet kan præ processeres med henblik på at anvende dette til at designe en prædiktiv model.

\subsection{Prædiktiv model}
For at forbedre kapacitetsudnyttelsen på ortopædkirurgisk afdelingen undersøges det, hvorvidt en prædiktiv model kan anvendes.
%Det fremgår af AFSNIT\fxnote{ref til afsnit}, at ortopædkirugisk afdeling på Aalborg Universitetshospital ikke fastholder en kapacitetsudnyttelse på $100$\%.\fxnote{snak sammen med Linette og Maria} 
Dette forventes muligt ved en forudsigelse af patienternes indlæggelsesvarighed. Aalborg Universitetshospital har i et tidligere projekt indsamlet data fra $970$ hospitalsindlæggelser fra ortopædkirurgisk afdeling. Disse data inkluderer bl.a. blodprøveanalyser og knoglescanninger (DXA), hvilket formodes at kunne anvendes til udvikling af en prædiktiv model. 

\noindent
Prædiktiv modellering definerer en proces, hvor en model udarbejdes med henblik på at forudsige hændelser. Denne model skal gøre det muligt at forstå og kvantificere nøjagtigheden af modellens forudsigelser ift. fremtidig data.\cite{Kuhn2013} 
Inden for sundhedssektoren er det muligt at prædiktere forskellige former for hændelser og forløb ved anvendelse af disse modeller. Dette kan eksempelvis være en forudsigelse om, hvorvidt en patient, indlagt med hjertestop, har risiko for endnu et hjertestop. Dette baseres på demografi, kost samt kliniske målinger. Et andet eksempel herpå kan være en estimering af glukosemængden i blodet hos en diabetiker, hvilket baseres på det infrarøde absorptionsspektrum af patientens blod.\cite{Hastie2008}

\noindent
Prædiktiv modellering kan opdeles i de to kategorier parametrisk og ikke-parametrisk. Forskellen på disse to kategorier ses overordnet ved om antallet af parametre kan varieres. I datasættet anvendt i projektet benyttes forskellige antal parametre for flere datapunkter og er derfor ikke-paramtetrisk.\cite{Sheskin2000}

\noindent
En prædiktiv model kan opbygges som en matematisk model eller en computerbaseret databehandlingsmodel (på engelsk: computational models). De matematiske modeller er mindre optimale at avende ved ikke-parametriske datasæt\fxnote{uddyb lidt måske}. Af denne årsag fokuserer projektet fremadrettet på computerbaseret databehandling, da denne egner sig bedst til det tilgængelige ikke-parametriske datasæt.\cite{Sheskin2000} 

\subsection{Databehandlingsmodel}


Computerbaseret databehandlingsmodeller varierer fra matematiske modeller, da databehandlingsmodellerne kan være vanskelige at opstille ligninger for. I stedet ofte simulering til at bestemme en forudsigelse. Denne metode kaldes ligeledes en "black box" prædiktiv model, da modellen ikke giver et indblik i, hvordan den kommer fra input til output. Det er ikke muligt at få et indblik, da der ikke anvendes en entydig formel eller matematisk model, men derimod en model, der kan tage højde for manglende data samt data uden lineær sammenhæng. Dermed vil det være relevant at anvende databehandlingsmodeller ud fra den tilgængelige data for dette projekt, da der ikke nødvendigvis er en direkte lineær sammenhæng mellem data og indlæggelsestid. Dertil er ikke alle parametre registrerede for alle individer i datasættet. \cite{Kuhn2013}


\subsubsection{Supervised eller unsupervised learning}
For at opstille en anvendelig algoritme er det nødvendigt at have et træningssæt. 
\cite{DIKU2010}. Et træningssæt tager udgangspunkt i en datamængde, der enten har kendte eller ukendte labels. Systemets træningssæt er supervised, hvis input-output relationen er kendt, således det vides, hvilken parameter af outputtet systemet angives i. \cite{Brownlee2013} Herudover findes ligeledes unsupervised learning, hvor indholdet af datasamples ikke har til formål at prædiktere en hændelse, men derimod finde mellem data.\cite{Brownlee2013, Kuhn2013} Formålet med den prædiktive model i denne rapport er at forudsige indlæggelsesvarigheden. Da indlæggelsesvarigheden er en del af det tildelte datasæt, er det hensigtsmæssigt at anvende modeller, der er baseret på supervised learning. Ved anvendelse af supervised learning er det muligt at frasortere parametre, der ikke har en statistisk indvirkning på det prædefinerede output parameter. Det er dermed muligt at udarbejde en model, der ekskluderer unødvendig data, da noget data kan have en negativ indvirkning på prædiktionen af indlæggelsesvarigheden. Dermed arbejdes der fremadrettet med modeller, der tager udgangspunkt i supervised learning.

\subsubsection{Generering af manglende data}
Ved manglende data i et datasæt findes der forskellige tilgange for kompensere for dette. Med udgangspunkt i \cite{Saar2007} vurderes det hvordan data med manglende indhold i enkelte parametre behandles. Der tages udgangspunkt i imputering da det ikke konteksten for den eksisterende data er muligt at indsamle den resterende data. Ved at anvende Distribution-based Imputation (DBI), er det med manglende værdier muligt at vægte datasæt med manglende parametre således at disse har en mindre betydning end de resterende målinger i datasættet under genereringen af et træningssæt. Årsagen til at de manglende parametre ikke udregnes vha. machine learning ud fra de resterende data, er at de ikke nødvendigvis giver det rigtige udfald. F.eks. kan komorbiditeter være svære at bestemme da datasættet ikke indeholder samtlige mulige komorbiditeter der findes. Dertil er det muligt at fjerne parametre fra hele træningssættet hvis hoveddelen af de registrerede patienter ikke har fået målt parameteren. Denne reduced feature model har flere fordele og ulemper som diskuteres i afsnit \ref{NIRUSHASAFSNIT}. 